В целом всё правильно, но пропущено было  предусловие: очередь не пуста; к команде  dequeue();
